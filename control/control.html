<!doctype html>
<html lang="ru" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Контрольная — Кодислово</title>

  <style>
    :root{
      --bg:#0b1020;--bg2:#070a14;--card:#121a33;--card2:#0f1730;
      --text:#e9ecff;--muted:#b8c0ff;--border:rgba(255,255,255,.12);
      --btn:#2b3a7a;--btn2:#1f2a57;--ok:#35d07f;--bad:#ff5b6e;
      --r:18px;--max:1100px;--shadow:0 14px 40px rgba(0,0,0,.26);
    }
    [data-theme="light"]{
      --bg:#f6f7fb;--bg2:#ffffff;--card:#ffffff;--card2:#f1f4ff;
      --text:#0e1326;--muted:#3a436a;--border:rgba(14,19,38,.12);
      --btn:#3254ff;--btn2:#e9edff;--shadow:0 14px 40px rgba(15,24,60,.10);
    }
    *{box-sizing:border-box}
    body{
      margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 500px at 20% 0%, rgba(43,58,122,.35), transparent 60%),
        linear-gradient(180deg,var(--bg2),var(--bg) 40%,var(--bg2));
    }
    .topbar{
      position:sticky;top:0;z-index:20;
      background:color-mix(in srgb, var(--bg) 78%, transparent);
      backdrop-filter:blur(10px);
      border-bottom:1px solid var(--border);
    }
    .topbar-inner{
      max-width:var(--max);margin:0 auto;padding:10px 14px;
      display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;
    }
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:34px;height:34px;border-radius:12px;background:linear-gradient(135deg,var(--btn),rgba(255,255,255,.08));border:1px solid var(--border)}
    .brand b{font-size:14px}
    .brand span{display:block;font-size:12px;color:var(--muted)}
    .controls{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:flex-end}

    .pill{
      padding:8px 12px;border-radius:999px;border:1px solid var(--border);
      background:color-mix(in srgb, var(--card) 80%, transparent);
      color:var(--muted);font-size:13px;display:inline-flex;gap:8px;align-items:center;
    }
    .btn{
      padding:11px 14px;border-radius:14px;border:1px solid var(--border);
      background:var(--btn);color:#fff;cursor:pointer;
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      transition:filter .15s ease,transform .08s ease;
      user-select:none;-webkit-tap-highlight-color:transparent;
      font-size:14px;
    }
    .btn.secondary{background:color-mix(in srgb, var(--btn2) 85%, transparent);color:var(--text)}
    .btn:disabled{opacity:.55;cursor:not-allowed}

    .toggle{display:inline-flex;align-items:center;gap:8px}
    .toggle input{display:none}
    .switch{width:44px;height:26px;border-radius:999px;border:1px solid var(--border);
      background:color-mix(in srgb, var(--card) 80%, transparent);position:relative}
    .knob{width:20px;height:20px;border-radius:50%;background:var(--text);position:absolute;top:2px;left:2px;transition:left .18s ease}
    .toggle input:checked + .switch .knob{left:22px}
    .toggle small{color:var(--muted);font-size:12px}

    .wrap{max-width:var(--max);margin:0 auto;padding:18px 14px 34px}
    .card{background:color-mix(in srgb, var(--card) 92%, transparent);border:1px solid var(--border);border-radius:var(--r);box-shadow:var(--shadow)}
    .hd{padding:16px 16px 0}
    .bd{padding:16px}
    h1{margin:0;font-size:clamp(18px,2.6vw,26px)}
    .sub{margin:6px 0 0;color:var(--muted);line-height:1.55}
    .row3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
    label{display:block;font-size:13px;color:var(--muted);margin:0 0 6px}
    input[type="text"], select{
      width:100%;padding:12px 12px;border-radius:14px;border:1px solid var(--border);
      background:color-mix(in srgb, var(--card2) 86%, transparent);
      color:var(--text);outline:none;
    }
    .hr{height:1px;background:var(--border);margin:14px 0}
    .resultLine{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .kpi{padding:10px 12px;border-radius:14px;border:1px solid var(--border);background:color-mix(in srgb, var(--card) 80%, transparent)}
    .kpi b{display:block;font-size:14px}
    .kpi span{color:var(--muted);font-size:12px}
    .notice{padding:12px 14px;border-radius:14px;border:1px dashed var(--border);background:color-mix(in srgb, var(--card2) 80%, transparent);color:var(--muted);line-height:1.5;flex:1;min-width:240px}

    .grid{display:grid;gap:14px}
    .task{
      border:1px solid var(--border);
      border-radius:16px;
      background:color-mix(in srgb, var(--card2) 84%, transparent);
      padding:14px;
    }
    .task-top{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .task h3{margin:0;font-size:15px}
    .badge{padding:6px 10px;border-radius:999px;border:1px solid var(--border);font-size:12px;color:var(--muted)}
    .hint{margin:8px 0 0;color:var(--muted);font-size:12px}
    .q{margin:10px 0 0;line-height:1.55}
    .answer{margin-top:10px}

    @media (max-width:860px){
      .row3{grid-template-columns:1fr}
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <b id="uiSubject">Контрольная</b>
          <span id="uiTitle">—</span>
        </div>
      </div>

      <div class="controls">
        <span class="pill"><span>⏱</span><span id="uiTimer">—</span></span>

        <button class="btn secondary" id="btnFinish" type="button">Завершить</button>
        <button class="btn" id="btnDownload" type="button" disabled>Скачать результат (JSON)</button>
        <button class="btn secondary" id="btnEmail" type="button" disabled>Отправить учителю</button>

        <label class="toggle" title="Светлая тема">
          <input id="themeToggle" type="checkbox" />
          <span class="switch"><span class="knob"></span></span>
          <small id="themeLabel">Тёмная</small>
        </label>
      </div>
    </div>
  </div>

  <div class="wrap">
    <div class="grid">
      <section class="card">
        <div class="hd">
          <h1 id="uiMainTitle">Контрольная работа</h1>
          <p class="sub" id="uiSubtitle">—</p>
        </div>
        <div class="bd">
          <div class="row3">
            <div>
              <label for="variantSelect">Вариант</label>
              <select id="variantSelect"></select>
            </div>
            <div>
              <label for="studentName">ФИО</label>
              <input id="studentName" type="text" placeholder="Иванов Иван Иванович" autocomplete="name" />
            </div>
            <div>
              <label for="studentClass">Класс</label>
              <input id="studentClass" type="text" placeholder="11А" />
            </div>
          </div>

          <div class="hr"></div>

          <div class="resultLine">
            <div class="kpi"><b id="kpiPoints">—</b><span>Баллы</span></div>
            <div class="kpi"><b id="kpiPercent">—</b><span>Процент</span></div>
            <div class="kpi"><b id="kpiMark">—</b><span>Отметка</span></div>
            <div class="notice">
              <b style="color:var(--text)">Важно:</b> ответы сохраняются автоматически. После «Завершить»
              станут доступны скачивание и отправка результата.
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="hd">
          <h1>Задания</h1>
          <p class="sub" id="uiInstr">—</p>
        </div>
        <div class="bd">
          <div id="tasksContainer" class="grid"></div>
        </div>
      </section>
    </div>
  </div>

  <script src="control_core.js"></script>
</body>
</html>
