<!doctype html>
<html lang="ru" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Кодислово — Учительская панель</title>

  <!-- Общие стили -->
  <link rel="stylesheet" href="../assets/css/control-ui.css">
</head>

<body>
  <div style="display:flex;justify-content:flex-end;margin-bottom:12px">
  <a href="./tabs.html"
     class="kd-btn secondary"
     style="text-decoration:none"
     target="_blank">
    Новая панель (проверка + сброс)
  </a>
</div>
  <!-- Topbar -->
  <div class="kd-topbar">
    <div class="kd-wrap">
      <div class="kd-row">
        <div>
          <div style="font-weight:800;letter-spacing:.2px">Кодислово · Учитель</div>
          <div style="color:var(--muted);font-size:12px;margin-top:2px">проверка · таймер · сброс</div>
        </div>

        <div class="kd-row" style="justify-content:flex-end">
          <div class="kd-theme" style="cursor:pointer">
            <span id="themeLabel">Тёмная</span>
            <label class="kd-switch" style="cursor:pointer">
              <input id="themeToggle" type="checkbox" aria-label="Переключить тему">
              <span>Тема</span>
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="kd-wrap">
    <!-- Header -->
    <header class="kd-header">
      <h1 class="kd-title">Учительская панель</h1>
      <p class="kd-subtitle">
        Просмотр работ из Yandex Object Storage, настройка таймера и выдача кода для повторной сдачи (reset).
      </p>
    </header>

    <!-- Main grid -->
    <div class="kd-grid" style="margin-top:18px;grid-template-columns: 420px 1fr;">
      <!-- LEFT -->
      <section class="kd-panel">
        <h3 style="margin:0 0 12px 0;font-size:18px">Настройки и сброс</h3>

        <div class="kd-grid" style="grid-template-columns:1fr 1fr;gap:14px">
          <div class="kd-field">
            <label for="subjectSelect">Предмет</label>
            <select class="kd-select" id="subjectSelect">
              <option value="russian">Русский</option>
              <option value="literature">Литература</option>
              <option value="informatics">Информатика</option>
            </select>
          </div>

          <div class="kd-field">
            <label for="resetVariant">Вариант (например: variant_01)</label>
            <input class="kd-input" id="resetVariant" placeholder="например: variant_01" />
          </div>
        </div>

        <div class="kd-grid" style="margin-top:14px;grid-template-columns:1fr 1fr;gap:14px">
          <div class="kd-field">
            <label for="timerMinutes">Таймер (минуты)</label>
            <input class="kd-input" id="timerMinutes" type="number" min="0" step="1" placeholder="0 = без лимита" />
          </div>

          <div class="kd-field">
            <label for="resetClass">Класс (для reset-кода)</label>
            <input class="kd-input" id="resetClass" placeholder="например: 9А" />
          </div>
        </div>

        <div class="kd-field" style="margin-top:14px">
          <label for="resetFio">ФИО (для reset-кода)</label>
          <input class="kd-input" id="resetFio" placeholder="например: Иванов Иван" />
        </div>

        <div class="kd-actions" style="margin-top:14px">
          <button class="kd-btn secondary" id="btnTimerLoad" type="button">Загрузить таймер</button>
          <button class="kd-btn" id="btnTimerSave" type="button">Сохранить таймер</button>
          <button class="kd-btn secondary" id="btnResetMake" type="button" style="border:1px solid rgba(255,91,110,.55);color:var(--bad);background:transparent">
            Сделать reset-код
          </button>
        </div>

        <div class="kd-textbox muted" style="margin-top:14px">
          <b>Reset</b> — код нужен, если ребёнок сдавал без интернета/ошибся браузером.
          Выдаёшь код → ребёнок вводит его в контрольной.
        </div>

        <div id="statusLine" class="kd-textbox muted" style="margin-top:14px">
          Готово.
        </div>
      </section>

      <!-- RIGHT -->
      <section class="kd-panel">
        <div class="kd-row" style="align-items:flex-end">
          <div>
            <h3 style="margin:0 0 6px 0;font-size:18px">Проверка работ</h3>
            <div style="color:var(--muted);font-size:13px;line-height:1.45">
              Фильтры влияют на list. Можно массово выделять и аннулировать.
            </div>
          </div>

          <div class="kd-row" style="justify-content:flex-end">
            <button class="kd-btn secondary" id="btnList" type="button" style="height:42px;border-radius:14px;padding:0 14px">
              Обновить
            </button>
            <button class="kd-btn secondary" id="btnVoidSelected" type="button"
              style="height:42px;border-radius:14px;padding:0 14px;border:1px solid rgba(255,91,110,.55);color:var(--bad);background:transparent">
              Аннулировать выбранные
            </button>
          </div>
        </div>

        <div class="kd-grid" style="margin-top:14px;grid-template-columns:1fr 1fr 1fr;gap:14px">
          <div class="kd-field">
            <label for="classFilter">Класс (фильтр)</label>
            <input class="kd-input" id="classFilter" placeholder="например: 9А" />
          </div>

          <div class="kd-field">
            <label for="variantFilter">Вариант (фильтр)</label>
            <input class="kd-input" id="variantFilter" placeholder="например: variant_01" />
          </div>

          <div class="kd-field">
            <label for="fioSearch">Поиск ФИО</label>
            <input class="kd-input" id="fioSearch" placeholder="часть ФИО или класса" />
          </div>
        </div>

        <div style="margin-top:14px;overflow:auto">
          <table style="width:100%;border-collapse:collapse">
            <thead>
              <tr style="color:var(--muted);font-size:13px">
                <th style="text-align:left;padding:10px;width:44px"></th>
                <th style="text-align:left;padding:10px">ФИО / Класс</th>
                <th style="text-align:left;padding:10px">Вариант</th>
                <th style="text-align:left;padding:10px">Дата</th>
                <th style="text-align:left;padding:10px">Ключ (S3)</th>
                <th style="text-align:left;padding:10px">Действия</th>
              </tr>
            </thead>
            <tbody id="resultsTbody"></tbody>
          </table>
        </div>

        <div style="margin-top:14px">
          <label style="display:block;font-size:13px;color:var(--muted);margin:0 0 8px 2px">Просмотр JSON</label>
          <textarea id="jsonViewer"
            style="width:100%;min-height:160px;border-radius:16px;border:1px solid var(--line);background:rgba(255,255,255,.04);color:var(--text);padding:12px;outline:none"
            placeholder="Здесь откроется результат (get)"></textarea>
        </div>
      </section>
    </div>
  </div>

  <script src="./teacher.js?v=2025-12-21-1"></script>
</body>
</html>
